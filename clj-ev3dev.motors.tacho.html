<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clj-ev3dev.motors.tacho documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clj-ev3dev 0.1.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-ev3dev</span></div></div></li><li class="depth-2 branch"><a href="clj-ev3dev.devices.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>devices</span></div></a></li><li class="depth-2 branch"><a href="clj-ev3dev.led.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>led</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>motors</span></div></div></li><li class="depth-3 current"><a href="clj-ev3dev.motors.tacho.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tacho</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>sensors</span></div></div></li><li class="depth-3 branch"><a href="clj-ev3dev.sensors.color.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>color</span></div></a></li><li class="depth-3 branch"><a href="clj-ev3dev.sensors.infrared.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>infrared</span></div></a></li><li class="depth-3"><a href="clj-ev3dev.sensors.touch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>touch</span></div></a></li><li class="depth-2"><a href="clj-ev3dev.ssh.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>ssh</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-current-position"><div class="inner"><span>current-position</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-find-tacho-motor"><div class="inner"><span>find-tacho-motor</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-initialise-position"><div class="inner"><span>initialise-position</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-keyword-.3Eattr"><div class="inner"><span>keyword-&gt;attr</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-read-attr"><div class="inner"><span>read-attr</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-read-duty-cycle"><div class="inner"><span>read-duty-cycle</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-read-polarity"><div class="inner"><span>read-polarity</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-read-regulation-mode"><div class="inner"><span>read-regulation-mode</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-read-speed"><div class="inner"><span>read-speed</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-reset"><div class="inner"><span>reset</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-reset-position"><div class="inner"><span>reset-position</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-root-motor-path"><div class="inner"><span>root-motor-path</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-run-direct"><div class="inner"><span>run-direct</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-run-forever"><div class="inner"><span>run-forever</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-run-motor"><div class="inner"><span>run-motor</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-run-timed"><div class="inner"><span>run-timed</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-run-to-rel-pos"><div class="inner"><span>run-to-rel-pos</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-send-command"><div class="inner"><span>send-command</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-set-polarity"><div class="inner"><span>set-polarity</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-set-regulation-mode"><div class="inner"><span>set-regulation-mode</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-set-speed"><div class="inner"><span>set-speed</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-set-stop-behaviour"><div class="inner"><span>set-stop-behaviour</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-stop"><div class="inner"><span>stop</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-write-attr"><div class="inner"><span>write-attr</span></div></a></li><li class="depth-1"><a href="clj-ev3dev.motors.tacho.html#var-write-duty-cycle"><div class="inner"><span>write-duty-cycle</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">clj-ev3dev.motors.tacho</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-current-position"><h3>current-position</h3><div class="usage"><code>(current-position config motor)</code></div><div class="doc"><pre class="plaintext">Reads the current position of the motor.
Returns numerical value.</pre></div></div><div class="public anchor" id="var-find-tacho-motor"><h3>find-tacho-motor</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Finds tacho motor that is plugged into given port. Ports are: :a, :b, :c, :d.
</pre></div></div><div class="public anchor" id="var-initialise-position"><h3>initialise-position</h3><div class="usage"><code>(initialise-position config motor position)</code></div><div class="doc"><pre class="plaintext">Set the position of the motor.
</pre></div></div><div class="public anchor" id="var-keyword-.3Eattr"><h3>keyword-&gt;attr</h3><div class="usage"><code>(keyword-&gt;attr k)</code></div><div class="doc"><pre class="plaintext">Converts keyword to a file name.
</pre></div></div><div class="public anchor" id="var-read-attr"><h3>read-attr</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-read-duty-cycle"><h3>read-duty-cycle</h3><div class="usage"><code>(read-duty-cycle config motor)</code></div><div class="doc"><pre class="plaintext">Reads the duty cycle value. Returns a numerical value.
</pre></div></div><div class="public anchor" id="var-read-polarity"><h3>read-polarity</h3><div class="usage"><code>(read-polarity config motor)</code></div><div class="doc"><pre class="plaintext">Returns the current polarity setting.
</pre></div></div><div class="public anchor" id="var-read-regulation-mode"><h3>read-regulation-mode</h3><div class="usage"><code>(read-regulation-mode config motor)</code></div><div class="doc"><pre class="plaintext">Reads the regulation mode of the motor.
</pre></div></div><div class="public anchor" id="var-read-speed"><h3>read-speed</h3><div class="usage"><code>(read-speed config motor)</code></div><div class="doc"><pre class="plaintext">Reads the speed value. Returns a numerical value.
</pre></div></div><div class="public anchor" id="var-reset"><h3>reset</h3><div class="usage"><code>(reset config motor)</code></div><div class="doc"><pre class="plaintext">Reset all of the parameters back to the default values and stop the motor.

It&apos;s a good idea to send this command at the start of a program to ensure the motor
is in a known state without having to write each of the parameters individually.</pre></div></div><div class="public anchor" id="var-reset-position"><h3>reset-position</h3><div class="usage"><code>(reset-position config motor)</code></div><div class="doc"><pre class="plaintext">Resets the position of the motor to 0.

NOTE: You will get an error if you do this while the motor is running.</pre></div></div><div class="public anchor" id="var-root-motor-path"><h3>root-motor-path</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-run-direct"><h3>run-direct</h3><div class="usage"><code>(run-direct config motor)</code></div><div class="doc"><pre class="plaintext">Runs a motor just like :run-forever, but changes to :duty-cycle take effect
immediately instead of having to send a new command. To update the :duty-cycle
run this command:
(write-duty-cycle config motor 20)

This is useful for implementing your own PID or something similar that needs to
update the motor output very quickly.</pre></div></div><div class="public anchor" id="var-run-forever"><h3>run-forever</h3><div class="usage"><code>(run-forever config motor)</code><code>(run-forever config motor speed)</code></div><div class="doc"><pre class="plaintext">Runs the motor at the given port.
The meaning of `speed` parameter depends on whether the
regulation mode is turned on or off.

When the regulation mode is off (by default) `speed` ranges
from -100 to 100 and it&apos;s absolute value indicates the percent
of motor&apos;s power usage. It can be roughly interpreted as a motor
speed, but deepending on the environment, the actual speed of the
motor may be lower than the target speed.

When the regulation mode is on (has to be enabled by enable-regulation-mode
function) the motor driver attempts to keep the motor speed at the `speed`
value you&apos;ve specified which ranges from -2000 to 2000.

Negative values indicate reverse motion regardless of the regulation mode.</pre></div></div><div class="public anchor" id="var-run-motor"><h3>run-motor</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Sets the speed of the motor and runs it.
Depending on the regulation mode it will either set
pulses per second (enabled) or duty cycle (disabled).

It throws exception if speed is outside of a valid range.</pre></div></div><div class="public anchor" id="var-run-timed"><h3>run-timed</h3><div class="usage"><code>(run-timed config motor)</code><code>(run-timed config motor time)</code></div><div class="doc"><pre class="plaintext">Runs a motor for a specified time asynchronously.
It starts the motor using :run-forever command and sets a timer in the kernel
to run the :stop command after the specified time. The time is in milliseconds,
and is written to :time-sp attribute.</pre></div></div><div class="public anchor" id="var-run-to-rel-pos"><h3>run-to-rel-pos</h3><div class="usage"><code>(run-to-rel-pos config motor)</code><code>(run-to-rel-pos config motor position)</code></div><div class="doc"><pre class="plaintext">Runs the motor to relative position. Position is specified by :position-write
but te value is added to the current position.

This function can be invoked either without specifying position and using the
current value, or with a position passed in, e.g.
(run-to-rel-pos config motor)
(run-to-rel-pos config motor 180)

NOTE: Using a negative value for a position will cause the motor to rotate in
the opposite direction.</pre></div></div><div class="public anchor" id="var-send-command"><h3>send-command</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-set-polarity"><h3>set-polarity</h3><div class="usage"><code>(set-polarity config motor polarity)</code></div><div class="doc"><pre class="plaintext">Changes the forward direction of a motor.

This is useful, for example, when you have two motors used as drive
wheels. By changing the polarity of one of the two motors, you can
send a positive value to both motors to drive forwards.

Polarity can be set to :normal or :inversed. The default is :normal.</pre></div></div><div class="public anchor" id="var-set-regulation-mode"><h3>set-regulation-mode</h3><div class="usage"><code>(set-regulation-mode config motor mode)</code></div><div class="doc"><pre class="plaintext">Toggle regulation mode of the motor to :off or :on.
Default mode is :off.

:off mode
In this mode, the motor driver uses the duty cycle
to determine what percentage of the battery voltage
to send to the motor.
If you run the motor at a fairly low duty cycle, and
you try to stop the hub of the motor with your thumb,
you&apos;ll find it&apos;s pretty easy to slow down or even stop
the motor. In some cases, this is not what you want. You
want the motor to &apos;try harder&apos; when it encounters
resistanceand - and the regulation_mode attribute is
going to help us with that.

:on mode
When the regulation_mode attribute is set to on, the motor
driver attempts to keep the motor speed at the value you&apos;ve
specified.
You can change the speed by calling set-speed function, e.g.
(set-speed config motor 275)

If you slow down the motor with a load, the motor driver tries
to compensate by sending more power to the motor to get it to
speed up. If you speed up the motor for some reason, the motor
driver will try to compensate by sending less power to the motor.</pre></div></div><div class="public anchor" id="var-set-speed"><h3>set-speed</h3><div class="usage"><code>(set-speed config motor speed)</code></div><div class="doc"><pre class="plaintext">Sets the speed value of a motor, in tacho counts per second.
It&apos;s used with regulation mode on.</pre></div></div><div class="public anchor" id="var-set-stop-behaviour"><h3>set-stop-behaviour</h3><div class="usage"><code>(set-stop-behaviour config motor behavior)</code></div><div class="doc"><pre class="plaintext">Sets a stop behavior of a motor. Allowed behaviours are:
:brake, :coast and :hold.

:coast - the power will be removed from the motor and it will coast to a stop
:brake - passive braking; the motor controller removes power from the motor, but it
         also shorts the power wires of the motor together. When a motor is manually
         rotated, it acts as an electrical generator, so shorting the power wires
         creates a load that absorbs energy.
:hold  - actively hold the motor position when stopping. Instead of removing power
         from the motor, the motor controller will start a PID to prevent the motor
         from being turned any further. It&apos;s intended for use with run-to-*-pos
         commands. It will work with other run commands, but may result in unexpected
         behaviour.</pre></div></div><div class="public anchor" id="var-stop"><h3>stop</h3><div class="usage"><code>(stop config motor)</code><code>(stop config motor behavior)</code></div><div class="doc"><pre class="plaintext">Stops the motor:
(stop config motor)

The recommended way of stopping is to set the behaviout beforehand, e.g.
(set-stop-behavior config motor :coast)
There are three possible behaviours when the motor stops:
:coast, :brake and :hold, described in more detail in set-stop-behavior
docstring.

We can also pass in required behavior to stop function:
(stop config motor :coast)</pre></div></div><div class="public anchor" id="var-write-attr"><h3>write-attr</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-write-duty-cycle"><h3>write-duty-cycle</h3><div class="usage"><code>(write-duty-cycle config motor value)</code></div><div class="doc"><pre class="plaintext">Sets the duty cycle. Duty cycle should be a numerical
value.

The duty cycle is useful when you just want to turn
the motor on and are not too concerned with how stable
the speed is.
The duty cycle attribute accepts values from -100 to +100.
The sign of the attribute determines the direction of the motor.
You can update the duty cycle while the motor is running.</pre></div></div></div></body></html>